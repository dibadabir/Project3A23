# -*- coding: utf-8 -*-
"""Travel_webscrap_(no_numbers)_Vader_ver.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1KzyDffiDqjRN6Qi-OrmHP4Dn26x9trKU
"""

# Downloading libraries for web-scraping
!pip install requests
!pip install beautifulsoup4==4.9.3
!pip install bs4
!pip install html5lib
!pip install num2words
!pip install vaderSentiment

# Importing libraries for web-scraping and tokenization purposes
import requests
import nltk
import pandas as pd
import re
from textblob import TextBlob
from num2words import num2words
from bs4 import BeautifulSoup as bs
from vaderSentiment.vaderSentiment import SentimentIntensityAnalyzer

# The list of common words such as "a", "an", etc.
nltk.download('stopwords')
# Download a collection of popular resources from the NLTK library
nltk.download('popular', quiet=True)
# Sentence tokenization (Splitting a text into individual senteces)
nltk.download('punkt')
# English vocabulary database
nltk.download('wordnet')
# Used for training language models or evaluating nlp algothms
nltk.download('brown')
# Used for performing sentiment analysis on text
nltk.download('vader_lexicon')

from nltk.tokenize import sent_tokenize
from nltk.stem import WordNetLemmatizer
from nltk.sentiment.vader import SentimentIntensityAnalyzer
from nltk.corpus import stopwords
from nltk.stem import SnowballStemmer
from nltk.tokenize import word_tokenize

lemmatizer = WordNetLemmatizer()
analyzer = SentimentIntensityAnalyzer()
stemmer = SnowballStemmer("english")
stop_words = stopwords.words("english")

sentences = []

def scrape_clean (url, div_class):
  # Load the website
  website = requests.get(url).text
  soup = bs(website,'html.parser')

  # Find the div section that is the parent of all paragraphs
  div = soup.find_all('div', attrs={'class':div_class})

  # Get the text from paragraphs
  extracted_text = []
  for div in div:
      paragraphs = div.find_all('p')
      for paragraph in paragraphs:
          extracted_text.append(paragraph.get_text(strip=True))  # Remove leading/trailing whitespace

  # Splitting the text into sentences, remove the stopwords and punctuations, and save the cleaned version in a list
  sentences = []
  for text in extracted_text:
    sentence = sent_tokenize(text)
    for item in sentence:
      # Convert to lowercase
      text_lowercase = item.lower()
      # Remove punctuation
      text_without_punctuation = re.sub(r"[^\w\s]", "", text_lowercase)
      # Remove stopwords and stem words
      tokens = word_tokenize(text_without_punctuation)
      new_tokens = []
      for word in tokens:
        if word.isnumeric():
          word = num2words(word)
          new_tokens.append(lemmatizer.lemmatize(word))
          continue
        elif word not in stop_words:
          new_tokens.append(lemmatizer.lemmatize(word))
          continue
      # Join tokens back into a string
      cleaned_text = " ".join(new_tokens)
      sentences.append(cleaned_text)

  return sentences

def clean(list):    # For websites that don't allow us to do the web scrape
  cleaned = []
  for i in list:
    sentence = sent_tokenize(i)
    for item in sentence:
      # Convert to lowercase
      text_lowercase = item.lower()
      # Remove punctuation
      text_without_punctuation = re.sub(r"[^\w\s]", "", text_lowercase)
      # Remove stopwords and stem words
      tokens = word_tokenize(text_without_punctuation)
      new_tokens = []
      for word in tokens:
        if word.isnumeric():
          word = num2words(word)
          new_tokens.append(lemmatizer.lemmatize(word))
          continue
        elif word not in stop_words:
          new_tokens.append(lemmatizer.lemmatize(word))
          continue
      # Join tokens back into a string
      cleaned_text = " ".join(new_tokens)
      cleaned.append(cleaned_text)
  return cleaned

website1 = 'https://www.oneclickitsolution.com/blog/role-of-artificial-intelligence-in-the-travel-industry/#:~:text=AI%E2%80%99s%20Impact%20on%20Travel%20Industry%201%20ChatBots%3A%20Almost,of%20Artificial%20Intelligence.%20...%204%20Virtual%20Reality%3A%20'
class1 = 'entry-content entry clearfix'
text1 = scrape_clean(website1, class1)
sentences.extend(text1)
print(text1)

website2 = 'https://framey.io/blog/ai-and-the-future-of-travel-and-tourism/'
class2 = 'content-inner'
text2 = scrape_clean(website2, class2)
sentences.extend(text2)
print(text2)

website3 = 'https://www.forbes.com/sites/rogersands/2023/11/01/how-will-artificial-intelligence-impact-the-travel-industry/'
class3 = 'article-body fs-article fs-responsive-text current-article'
text3 = scrape_clean(website3, class3)
sentences.extend(text3)
print(text3)

website4 = 'https://www.accenture.com/us-en/insights/travel/travel-ai-maturity'
class4 = 'root container responsivegrid'
text4 = scrape_clean(website4, class4)
sentences.extend(text4)
print(text4)

website5 = 'https://explore.seeker.io/blog/ai-and-the-travel-industry'
class5 = 'sqs-html-content'
text5 = scrape_clean(website5, class5)
sentences.extend(text5)
print(text5)

website6 = 'https://www.mckinsey.com/industries/travel-logistics-and-infrastructure/our-insights/what-ai-means-for-travel-now-and-in-the-future'
class6 = 'mdc-o-content-body mck-u-dropcap'
text6 = scrape_clean(website6, class6)
sentences.extend(text6)
print(text6)

website7 = 'https://mize.tech/blog/6-examples-of-how-ai-is-used-in-the-travel-industry/'
class7 = 'wprt-container'
text7 = scrape_clean(website7, class7)
sentences.extend(text7)
print(text7)

website8 = 'https://www.revfine.com/artificial-intelligence-travel-industry/'
class8 = 'post-content'
text8 = scrape_clean(website8, class8)
sentences.extend(text8)
print(text8)

website9 = 'https://startups.epam.com/blog/artificial-intelligence-in-tourism-and-travel-industry'
class9 = 'ArticlePage_mainContent___vpeu'
text9 = scrape_clean(website9, class9)
sentences.extend(text9)
print(text9)

website10 = 'https://softwarehut.com/blog/business/artificial-intelligence-travel-industry'
class10 = 'blog-article-module--blogArticleContent--1a626'
text10 = scrape_clean(website10, class10)
sentences.extend(text10)
print(text10)

website11 = 'https://easternpeak.com/blog/ai-use-cases-in-travel-and-hospitality/'
class11 = 'post__text'
text11 = scrape_clean(website11, class11)
sentences.extend(text11)
print(text11)

website12 = 'https://botshot.ai/resources/blog/how-ai-is-transforming-the-travel-industry'
class12 = 'MuiBox-root css-14l6jdq'
text12 = scrape_clean(website12, class12)
sentences.extend(text12)
print(text12)

website13 = 'https://inoxoft.com/blog/exploring-ai-use-cases-in-the-travel-industry/'
class13 = 'postContent__content'
text13 = scrape_clean(website13, class13)
sentences.extend(text13)
print(text13)

website14 = 'https://www.luxurytravelmagazine.com/news-articles/the-revolutionary-role-of-ai-in-the-travel-industry'
class14 = 'entry-content notopmargin'
text14 = scrape_clean(website14, class14)
sentences.extend(text14)
print(text14)

# Texts that can't be scraped from website
# https://www.weforum.org/agenda/2023/12/how-is-ai-reshaping-the-travel-tourism/
# https://business.booking.com/en-us/business-travel-resources/articles/business-travel-and-aI/?aid=1181029&label=msn-jVw1O*kpnhMQALsGbdeDlQ-80539282677219:tidat-2332339040468841:loc-188:neo:mtb:lp40862:dec:qsai%20in%20travel%20industry&utm_campaign=English_United_Kingdom%20EN%20GB&utm_medium=cpc&utm_source=bing&utm_term=jVw1O*kpnhMQALsGbdeDlQ&msclkid=0b42088af0451fb689e86e983355aca5
# https://amadeus.com/en/insights/themes/artificial-intelligence-travel-industry
# https://www.nytimes.com/2023/03/16/travel/chatgpt-artificial-intelligence-travel-vacation.html

not_scraped = ['In the dynamic landscape of travel, artificial intelligence (AI) stands as a beacon of transformation, reshaping our journey from the moment we decide to explore the world. In building an AI ecosystem for travellers, we have doubled conversion rates, shaped user loyalty and fostered global communities. Beyond streamlined planning, AI innovation redefines the very essence of travel, promising a future marked by efficiency, personalization and global enrichment.',
               'For businesses, AI is used to analyse historical booking patterns, market demand and external factors (e.g. weather and events) to optimize pricing in real time. Dynamic pricing strategies help companies adjust prices to maximize revenue and occupancy rates in hotels. AI is also employed for predictive maintenance in the transportation sector, helping to anticipate and address potential issues with vehicles and aircraft before they cause disruptions.',
               'For consumers, the future of smart travel planning is exemplified by efficiently deciphering complex requests and swiftly directing users to detailed itinerary planning, personalized recommendations and bookings. This is a process we’re continually improving with our travel assistant, eliminating the manual effort of input and filtering searches and making travel planning as effortless as chatting with a friend. TripGenie provides personalized, editable itineraries in less than a minute that would take hours or days to plan manually. It can also handle complex requests, such as multi-destination planning.',
               'During the COVID-19 pandemic, we saw augmented reality (AR) and virtual reality (VR) technologies enhance the travel experience by providing virtual tours, interactive maps and immersive experiences to help travellers explore destinations without actually visiting. A common use of AR is also in translation apps, allowing users to point their smartphones at foreign signs or text. The app then overlays translations onto real-world images, breaking down language barriers for travellers and allowing them to better experience their new environment.',
               'These shared experiences have the potential to deepen the relationship between travellers and travel partners. In our platforms, we have been experimenting with using AI to tap into the stories of travellers, forming algorithmic, AI-powered lists. These lists offer curated information based on user preferences and real-time data, encouraging a vibrant travel ecosystem and strong traveller communities.',
               'AI-powered chatbots and virtual assistants are used for customer service, providing instant responses to queries and assisting with booking processes. These systems can handle routine tasks, such as reservation changes and FAQs, and provide travel recommendations based on user preferences.',
               'Our AI chatbots handle numerous enquiries via text and voice, achieving impressive self-service resolution rates for airline tickets and hotels. This streamlined approach not only saves time and energy for customers, it also accelerates case-solving efficiency, allowing customer service teams to focus on more complex cases.',
               'As we look ahead, the future of AI in travel is poised to focus on efficient and highly personalized solutions tailored to individual travellers needs. This vision signifies the next phase of the travel industry and underscores the profound impact of AI in making travel more convenient, personalized and memorable for everyone.',
               'This AI push aligns with a thriving travel market with domestic and regional tourism experiencing substantial growth. During Chinas Golden Week, the first long holiday since the reopening of borders in 2023, outbound travel volume surged by over 800% compared to the previous year, while domestic tourism grew by nearly 200% this year. Chinas inbound tourism harbours immense potential and if elevated to 1.5% of GDP, it could yield a growth of over RMB 1.3 trillion.',
               'In this new era of travel, we are optimistic. As we continue to evolve in the realm of AI, the possibilities are not just exciting; they are limitless. AI is not merely changing the way we travel; it is revolutionising the very essence of our travel experiences, making them efficient, intuitive and deeply enriching.',
               'The trustworthiness of AI and its features is a complex and evolving concern. While AI technologies have demonstrated remarkable capabilities across many fields, general trustworthiness hinges on the ethical frameworks and structures in place. Issues such as biased algorithms, lack of transparency, and potential misuse of AI raise valid concerns. When it comes to corporate travel, privacy and safety are also essential.',
               'Ultra-personalized travel recommendations – Trust is highest (89%) in AI systems that provide ultra-personalized travel recommendations. Tailored suggestions enhance the overall travel experience, earning the confidence of business travelers.',
               'Real-time language translation services – The reliability of real-time language translation services is a cornerstone of trust (88%). Breaking down language barriers contributes to smoother interactions and increased trust in AI.',
               'Automated expense tracking and reporting – Trust in applications for automated expense tracking and reporting (88%) underscore their importance in the eyes of business travelers.',
               'Enhanced cyber protection – Despite the slightly lower perception of this AI feature, there is a growing level of confidence in enhanced cyber protection tools (78%). Businesses may need to continue to address concerns to build trust in cybersecurity solutions and explore the benefits of these features.',
               'A fascinating correlation emerges when exploring the relationship between interest and trust in AI. The younger generations (18–45 years old) exhibit a higher overall interest in tech features compared to their older counterparts (46 years old and above). Notably, younger professionals show a heightened interest in health and wellness monitoring apps compared to their older counterparts, reiterating the findings of Deliotte’s insights into travel trends. As business travel evolves, embracing AI isn’t just a choice, but a necessity. Understanding the interests, trust levels and preferences of business travelers is pivotal for businesses to offer tailored solutions such as chatbots, and machine learning models for suggesting options for flights, accommodation and car rentals.',
               'We are focused on ways to use artificial intelligence (AI) in the travel industry to better serve our customers, so they can better serve their customers, the end travelers. We see AI as a key enabler in making the overall travel experience smoother while helping travel players improve their businesses. AI is currently being integrated into many of our solutions. For example, for our airline customers, we have a dedicated team of Amadeus AI and machine learning (ML) experts working to support areas such as revenue management optimization, merchandising, and other business areas. We also have AI capabilities in distribution, airports, and hospitality, covering virtually all segments of the travel industry.',
               'To complement the different AI teams that focus on our travel solutions (e.g., airlines), we also have a dedicated research team composed of experimental research scientists and engineers. The mission of this team is to better understand travelers to enable smarter, seamless, and more sustainable travel experiences with AI. Our researchers deliver academic publications and push the boundaries of AI knowledge in travel. Their innovations are put into production with different Amadeus products and services using the latest machine learning models. We also have open self-service AI APIs for developers in the travel industry.',
               'We are continuously researching the behaviors of travelers to understand their motivations to travel. By doing so, we can better propose offers that might enrich their experience or alternatives that could improve their journey and satisfaction.',
               'By analyzing behaviors, segmenting, and clustering travelers, we can predict their actions leveraging AI technologies. For example, we are looking at choice modeling to predict what travelers will most likely choose when presented with different alternatives.',
               'We are working to create smooth and frictionless experiences for travelers by improving the efficiency of various travel related processes. An example of this is using AI to help optimize passenger processing at airports or accurately forecasting the amount of luggage in an aircraft.',
               'The travel industry may never be the same. Already, travelers can “converse” with the system, sharing information like a destination, time of year and interests, and getting back a personalized itinerary festooned with vivid descriptions. A reporter’s recent request for a two-day itinerary to Whistler, British Columbia, yielded ideas like snowshoeing with a guide who will point out the local flora and fauna, and taking a dog-sled ride “with a team of beautiful huskies” for a winter trip. Given additional parameters, ChatGPT will update its suggestions, so adding a preference for Thai food to the Whistler conversation prompted the system to give new restaurant suggestions. But ChatGPT does have limitations. First, its information base currently does not go beyond 2021, and it does not have access to important travel-related data that can change from moment to moment, like airline schedules and weather forecasts. New versions are being developed, including a major upgrade released this week, and are expected to keep improving. Also, the software doesn’t always know the difference between reliable and unreliable information on the internet, so it can offer answers that are untrue. ChatGPT’s maker, OpenAI, also warns that the software may occasionally produce “biased content.” Anyone can use the software, which is free and accessible via the OpenAI website. Tourist bureaus can ask ChatGPT to write marketing copy describing must-see sites, and travel advisers can use it to compose emails to their clients and create social media posts. Airline, hotel and rental car companies could use it to help their virtual agents answer a wider variety of questions. One travel adviser said she used ChatGPT to write a “firm but friendly breakup letter” to a client with whom she no longer wanted to work. The adviser had to rewrite the prompt — the term for a ChatGPT question or command — a few times to get what she wanted, but in the end it worked. “My client said she understood and wasn’t mad at me,” said the adviser, who asked to remain anonymous because she did not want her former client to know that ChatGPT had written the letter.',
               ]
cleaned = clean(not_scraped)
sentences.extend(cleaned)
print(cleaned)

for i in sentences:
  print(f'{i}\n')

# Use Vader library to get the polarity of the sentence
def getPolarity(text):
    polarity = SentimentIntensityAnalyzer().polarity_scores(text)
    if polarity['compound'] > 0:
      sentiment = 'postive'
    elif polarity['compound'] < 0:
      sentiment = 'negative'
    else:
      sentiment = 'neutral'
    return sentiment,polarity

data = []  # List to store dictionaries
for sentence in sentences:
  sentiment, polarity = getPolarity(sentence)
  new_item = {'sentence' : sentence, 'sentiment' : sentiment, 'category' : 'Travel'}
  data.append(new_item)

df = pd.DataFrame(data)

df.to_csv('Travel data (no numbers) - Vader ver.csv', index=False)